---
// src/components/projects.astro (фрагмент)
import { Image } from "astro:assets";
import TechList from "./TechList.astro";
import projects from "../lib/project.js";
---

<section id="projects" class="bg-[#16181D] mx-auto max-w-[1100px] px-4 py-16 md:py-24 scroll-mt-[var(--header-h)]">
  <header class="text-center mb-8">
    <p class="text-[#E3646E] font-medium text-xl">Meine Projekte</p>
    <h2 class="font-bold text-2xl tracking-tight">Sehen Sie sich die vorgestellten Projekte an</h2>
  </header>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    {projects.map((p) => (
      <article class="grid gap-6 md:grid-cols-[250px_1fr] items-start rounded-2xl bg-[#292C34] p-6 shadow-lg border border-white/5 min-h-[220px] hover:-translate-y-0.5 transition overflow-hidden">
        <!-- превью -->
        <div class="w-full md:w-[250px] aspect-[4/3] h-[200px] rounded-xl overflow-hidden">
          <Image
            src={p.image}
            alt={p.title}
            widths={[320, 480, 640, 768, 896, 1024]}
            formats={["avif", "webp"]}
            quality={70}
            sizes="(min-width: 768px) 250px, 92vw"
            class="w-full h-full object-cover cursor-zoom-in"
            loading="lazy"
            decoding="async"
            placeholder="blur"
            data-lightbox
            /* Если хочешь сам указать «большую» версию — раскомментируй:
            data-full={p.imageFull ?? undefined}
            */
          />
        </div>

        <!-- контент -->
        <div class="flex flex-col h-full min-w-0 w-full">
          <h3 class="font-semibold text-[16px] mb-1 break-words whitespace-normal">{p.title}</h3>
          <p class="text-sm text-white/70 mb-4 break-words whitespace-normal">
            {p.description.split(".").slice(0, 2).join(". ")}
          </p>
          <div class="mt-auto flex flex-wrap gap-2">
            <TechList items={p.tech} />
          </div>
        </div>
      </article>
    ))}
  </div>
</section>
