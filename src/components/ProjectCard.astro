---
import type { Project } from "../data/projects";
const { project } = Astro.props as { project: Project };

const img = `/previews/${project.slug}.webp`;
---

<article
    class="group relative rounded-2xl border border-white/10 bg-white/5 p-4 transition hover:border-white/20 hover:bg-white/10 gap-4 flex flex-col h-full"
>
    <a
        href={project.url}
        target="_blank"
        rel="noopener"
        class="block overflow-hidden rounded-xl"
    >
        <img
            src={img}
            alt={`${project.title} preview`}
            loading="lazy"
            decoding="async"
            class="aspect-[16/10] w-full object-cover transition-transform duration-300 group-hover:scale-[1.02]"
            onerror="this.src='/previews/fallback.webp'"
        />
    </a>

    <div class="mt-4 flex flex-row items-start justify-between gap-3">
        <div class="flex flex-col gap-1 min-w-0 gap-y-4">
            <h3 class="text-base font-semibold text-white">
                <a
                    href={project.url}
                    target="_blank"
                    rel="noopener"
                    class="hover:underline underline-offset-4"
                >
                    {project.title}
                </a>
                {
                    project.description ? (
                        <p class="mt-1 text-sm text-white/70">
                            {project.description}
                        </p>
                    ) : null
                }
            </h3>
            {
                project.tags && (
                    <ul class="mt-1 flex flex-wrap gap-1.5 text-xs text-white/70">
                        {project.tags.map((t) => (
                            <li class="rounded-md bg-white/10 px-2 py-0.5">
                                {t}
                            </li>
                        ))}
                    </ul>
                )
            }
        </div>

        <div class="flex shrink-0 gap-2">
            <a
                href={project.url}
                target="_blank"
                rel="noopener"
                class="inline-flex items-center rounded-lg border border-white/15 px-3 py-1.5 text-sm text-white/90 hover:bg-white/10"
            >
                Demo
            </a>
            <!-- {
                project.repo && (
                    <a
                        href={project.repo}
                        target="_blank"
                        rel="noopener"
                        class="inline-flex items-center rounded-lg border border-white/15 px-3 py-1.5 text-sm text-white/90 hover:bg-white/10"
                    >
                        Code
                    </a>
                )
            } -->
        </div>
    </div>
</article>
