---
import { CONTACTS } from "../lib/contacts";
import { Icon } from "astro-icon/components";
---

<section
  class="min-h-screen bg-[#16181D] flex flex-col items-center justify-between gap-8 overflow-hidden bg-[url(/src/assets/bg/bg-lines-symmetric.svg)] bg-center bg-no-repeat bg-size-[120%] py-16 md:py-24"
>
  <div class="w-full max-w-[900px] mx-auto px-4 flex flex-col items-center">
    <div class="flex flex-col items-center text-center gap-2">
      <p class="text-[#BB72E9] text-[20px]">Kontakt</p>
      <p class="font-bold text-2xl tracking-tight text-gray-100">
        Möchten Sie mir schreiben?
      </p>
      <p class="max-w-lg text-white/70">
        Zögern Sie nicht, mich zu kontaktieren – für Projekte, Fragen oder
        einfach zum Austausch. Ich freue mich auf Ihre Nachricht
      </p>
    </div>
  </div>

  <!-- Compact Contact Card -->
  <div
    class="w-full max-w-md mx-auto px-4 bg-gray-800/50 backdrop-blur-sm p-6 rounded-xl border border-gray-700"
  >
    <div class="flex flex-wrap gap-4 justify-center mb-6" id="contact">
      <a
        href="mailto:sardakserhii@gmail.com?subject=Projektanfrage%20Website"
        class="flex items-center gap-2 px-4 py-2 bg-[#BB72E9] hover:bg-[#a85dd4] text-white rounded-lg transition-colors"
        rel="noopener"
      >
        <Icon name="lucide:mail" class="w-5 h-5" />
        <span>Email</span>
      </a>
      <a
        href="https://linkedin.com/in/sardakserhii"
        class="flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors"
        target="_blank"
        rel="me noopener noreferrer"
      >
        <Icon name="lucide:linkedin" class="w-5 h-5" />
        <span>LinkedIn</span>
      </a>
      <a
        href="https://github.com/sardakserhii"
        class="flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors"
        target="_blank"
        rel="me noopener noreferrer"
      >
        <Icon name="lucide:github" class="w-5 h-5" />
        <span>GitHub</span>
      </a>
    </div>

    <!-- Contact Form -->
    <form
      id="contact-form"
      action="/api/contact"
      method="post"
      class="space-y-4"
    >
      <!-- Honeypot (скрыто для людей) -->
      <input
        type="text"
        name="company"
        tabindex="-1"
        autocomplete="off"
        class="absolute opacity-0 pointer-events-none"
        aria-hidden="true"
      />

      <div>
        <label for="name" class="block text-sm font-medium text-white/70 mb-1"
          >Name</label
        >
        <input
          type="text"
          id="name"
          name="name"
          required
          class="w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-gray-100 focus:outline-none focus:border-[#BB72E9] transition-colors"
        />
      </div>

      <div>
        <label for="email" class="block text-sm font-medium text-white/70 mb-1"
          >Email</label
        >
        <input
          type="email"
          id="email"
          name="email"
          required
          class="w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-gray-100 focus:outline-none focus:border-[#BB72E9] transition-colors"
        />
      </div>

      <div>
        <label
          for="message"
          class="block text-sm font-medium text-white/70 mb-1">Nachricht</label
        >
        <textarea
          id="message"
          name="message"
          rows="4"
          required
          class="w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-gray-100 focus:outline-none focus:border-[#BB72E9] transition-colors resize-none"
        ></textarea>
      </div>

      <button
        type="submit"
        class="w-full px-6 py-3 bg-[#BB72E9] hover:bg-[#a85dd4] text-white font-medium rounded-lg transition-colors"
      >
        Nachricht senden
      </button>

      <p id="form-status" class="text-sm text-white/70"></p>
    </form>
  </div>

  <div class="w-full max-w-[900px] mx-auto px-4 text-center">
    <p class="text-white/70 text-sm">
      Ich bin offen für neue Projekte und freue mich auf Ihre Nachricht.
    </p>
  </div>
</section>
<script is:inline>
  const form = document.getElementById("contact-form");
  const statusEl = document.getElementById("form-status");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    statusEl.textContent = "Sende…";
    try {
      const res = await fetch(form.action, {
        method: "POST",
        body: new FormData(form),
      });
      if (res.ok) {
        statusEl.textContent = "Danke! Nachricht wurde gesendet.";
        form.reset();
      } else {
        statusEl.textContent =
          "Fehler beim Senden. Bitte später erneut versuchen.";
      }
    } catch {
      statusEl.textContent = "Netzwerkfehler. Bitte später erneut versuchen.";
    }
  });
</script>
